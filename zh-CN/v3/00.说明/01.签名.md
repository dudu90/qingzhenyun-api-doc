# 签名（校签）

* API的签名方式与AWS的签名方式基本一致，请参阅：

#### 调试

#### 准备工作和知识

* 您需要一对 AppID 和 Secret 以开始工作。联系我们 <qingzhenyun@hotmail.com> 以便获取对应的资料。邮件中请说明您申请的目的。

```
重要：请妥善保管 Secret，如果 Secret 发生泄漏，我们可能终止它的使用。
```

* 阅读RFC文档 [RFC 2104](https://www.ietf.org/rfc/rfc2104.txt) 了解**HMAC-SHA1**加密方法

* 阅读RFC文档 [RFC 2616](https://www.ietf.org/rfc/rfc2616.txt) 了解请求body 的MD5值算法

* 熟悉您使用的请求库

#### 方法概述

```
Signature = Base64(hmac-sha1(AccessKeySecret,
            METHOD
            + HOST
            + URI
            + PARAMS
            + CanonicalizedHeaders
            + CanonicalizedResource
        )
    )
```

* CanonicalizedHeaders 字段名小写，值按照实际情况来（因为HTTP/2规范要求全小写）

* PARAMS 建议升序排列，我们发现部分请求库会重新排布PARAMS

* canonicalizedResource 请注意部分库会自动将URL中参数进行URLEncode以及调换位置。我们建议您自行URLEncode参数请求


#### 请求头应该类似于，除非特别说明，只有这三个头需要加入校验：

```
authorization: Bearer " + xxxxxxx

content-md5: xxxxxxx

qingzhen-token: xxxxxxx
```

## 示范

此处进行签名签名的一般性示范。为了全面展示，这里使用POST JSON 方式，为展示URLEncode，参数使用了中文。

* 我们准备以 post json:

```json
{"accessKeySecret":"长者","birthday":"19260817"}
``` 

到如下地址：
```
/v3/system/sign?play=夏威夷吉他&language=八国语言&long=yes
```
* 假设 ```token``` 为 
```
tank1989
```
* 假设```AccessKeyId``` 为 
```
董先生
```
* 假设 ```AccessKeySecret``` 为 

```
张宝华
```
